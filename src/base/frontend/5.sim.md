---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---


# sim

## 1.地址设置

- 代码部署地址

::: demo

```vue
<template>
    <el-input type="success" v-model="url" placeholder="代码部署地址" @change="save"/>
</template>
<script>
export default {
  data() {
    return {
      url:'/usr/src/zhoubichuan/dev/'
    }
  },
  methods: {
    async save() {
      localStorage.setItem('web-devops-frontend-dev',this.url)
    },
  },
  mounted() {
    const url = localStorage.getItem('web-devops-frontend-dev')
    if(!url){
      this.save()
    }
  }
}
</script>
```

:::

- 打包压缩代码地址

::: demo

```vue
<template>
    <el-input type="success" v-model="url" placeholder="打包压缩代码地址" @change="save"/>
</template>
<script>
export default {
  data() {
    return {
      url:'/usr/src/zhoubichuan/zip/dev/'
    }
  },
  methods: {
    async save() {
      localStorage.setItem('web-devops-frontend-zip-dev',this.url)
    },
  },
  mounted() {
    const url = localStorage.getItem('web-devops-frontend-zip-dev')
    if(!url){
      this.save()
    }
  }
}
</script>
```

:::

## 2.上传压缩包资源

::: demo

```vue
<template>
  <web-upload
    class="avatar-uploader"
    action="https://jsonplaceholder.typicode.com/posts/"
    :show-file-list="false"
    :on-success="handleAvatarSuccess"
    :before-upload="beforeAvatarUpload"
  >
    <img v-if="imageUrl" :src="imageUrl" class="avatar" />
    <i v-else class="el-icon-plus avatar-uploader-icon"></i>
  </web-upload>
</template>

<style>
.avatar-uploader .el-upload {
  border: 1px dashed #d9d9d9;
  border-radius: 6px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}
.avatar-uploader .el-upload:hover {
  border-color: #409eff;
}
.avatar-uploader-icon {
  font-size: 28px;
  color: #8c939d;
  width: 178px;
  height: 178px;
  line-height: 178px;
  text-align: center;
}
.avatar {
  width: 178px;
  height: 178px;
  display: block;
}
</style>

<script>
export default {
  data() {
    return {
      imageUrl: "",
    }
  },
  methods: {
    handleAvatarSuccess(res, file) {
      this.imageUrl = URL.createObjectURL(file.raw)
    },
    beforeAvatarUpload(file) {
      const isJPG = file.type === "image/jpeg"
      const isLt2M = file.size / 1024 / 1024 < 2

      if (!isJPG) {
        this.$message.error("上传头像图片只能是 JPG 格式!")
      }
      if (!isLt2M) {
        this.$message.error("上传头像图片大小不能超过 2MB!")
      }
      return isJPG && isLt2M
    },
  },
}
</script>
```

:::

## 3.版本列表

::: demo

```vue
<template>
    <div class="student">
        <web-button size="mini" @click="handleAdd">添加</web-button>
        <el-table class="student-table" :data="tableData" style="width: 100%" size="mini" stripe border show-header
            height="600px">
            <el-table-column prop="id" label="编号" width="180"> </el-table-column>
            <el-table-column prop="s_name" label="名称"> </el-table-column>
            <el-table-column prop="s_math" label="大小"> </el-table-column>
            <el-table-column prop="s_english" label="地址"> </el-table-column>
            <el-table-column prop="s_remark" label="备注"> </el-table-column>
            <el-table-column label="操作" width="180">
                <template slot-scope="{ row }">
                    <web-button type="text" @click="() => handleUnZip(row)">删除目录</web-button>
                    <web-button type="text" @click="() => handleUnZip(row)">解压部署</web-button>
                    <web-button type="text" @click="() => handleDel(row)">删除</web-button>
                    <web-button type="text" @click="() => handleEdit(row)">编辑</web-button>
                    <web-button type="text" @click="() => handleView(row)">查看详情</web-button>
                </template>
            </el-table-column>
        </el-table>
        <el-dialog :title="isAdd ? '修改压缩包' : isEdit ? '修改压缩包' : '查看压缩包'" :visible.sync="dialogFormVisible">
            <el-form :model="form" size="mini" :disabled="isView" label-width="50px">
                <el-form-item label="名称">
                    <el-input v-model="form.s_name" autocomplete="off"></el-input>
                </el-form-item>
                <el-form-item label="大小">
                    <el-input v-model="form.s_math" autocomplete="off"></el-input>
                </el-form-item>
                <el-form-item label="地址">
                    <el-input v-model="form.s_english" autocomplete="off"></el-input>
                </el-form-item>
                <el-form-item label="备注">
                    <el-input type="textarea" v-model="form.s_remark" autocomplete="off"></el-input>
                </el-form-item>
            </el-form>
            <div slot="footer" class="dialog-footer" v-if="!isView">
                <web-button size="mini" @click="dialogFormVisible = false">取 消</web-button>
                <web-button size="mini" type="primary" @click="handleConfirm">确 定</web-button>
            </div>
        </el-dialog>
    </div>
</template>

<script>
export default {
    data() {
        return {
            tableData: [],
            dialogTableVisible: false,
            dialogFormVisible: false,
            isAdd: false,
            isEdit: false,
            isView: false,
            form: {
                id: "",
                s_name: "",
                s_math: "",
                s_english: "",
                s_remark: "",
            },
            dialogVisible: false,
        }
    },
    mounted() {
        this.getData()
    },
    methods: {
        async getData() {
            let data = await this.$api.student.queryAll();
            this.tableData = data
        },
        async handleConfirm() {
            this.dialogFormVisible = false
            if (this.isAdd) {
                await this.$api.student.add(this.$qs.stringify(this.form));
                this.$message.success("数据添加成功")
                this.getData()
            } else {
                await this.$api.student.update(this.$qs.stringify(this.form));
                this.$message.success("数据更新成功")
                this.getData()
            }
            this.view = false
        },
        handleAdd() {
            this.dialogFormVisible = true
            this.isAdd = true
            this.isView = false
            this.isEdit = false
            this.form = { s_name: '', s_math: '', s_english: '', s_remark: '' }
            this.getData()
        },
        async handleEdit({ id }) {
            let data = await this.$api.student.query({ id });
            this.dialogFormVisible = true
            this.isAdd = false
            this.isView = false
            this.isEdit = true
            this.form = data
        },
        async handleView({ id }) {
            let data = await this.$api.student.query({ id });
            this.dialogFormVisible = true
            this.isAdd = false
            this.isView = true
            this.isEdit = false
            this.form = data
        },
        async handleDel({ id }) {
            await this.$api.student.delSingle(this.$qs.stringify({ id }));
            this.$message.success("数据删除成功")
            this.getData()
        },
        async handleUnZip({ id }) {
            await this.$api.student.delSingle(this.$qs.stringify({ id }));
            this.$message.success("数据删除成功")
            this.getData()
        },
    },
}
</script>
<style>
.student {
    height: 100%;
}

.student-table {
    height: 100%;
}
</style>
```

:::
