(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{780:function(s,a,t){"use strict";t.r(a);var n=t(3),r=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"十-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十-服务"}},[s._v("#")]),s._v(" 十.服务")]),s._v(" "),a("h2",{attrs:{id:"_1-服务简介和分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-服务简介和分类"}},[s._v("#")]),s._v(" 1.服务简介和分类")]),s._v(" "),a("h3",{attrs:{id:"_1-1-运行级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-运行级别"}},[s._v("#")]),s._v(" 1.1 运行级别")]),s._v(" "),a("h4",{attrs:{id:"_1-1-1-运行级别分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-运行级别分类"}},[s._v("#")]),s._v(" 1.1.1 运行级别分类")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("运行级别")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("0")]),s._v(" "),a("td",[s._v("关机")])]),s._v(" "),a("tr",[a("td",[s._v("1")]),s._v(" "),a("td",[s._v("单用户,类似于 Window 的安全模式，主要用于系统修复")])]),s._v(" "),a("tr",[a("td",[s._v("2")]),s._v(" "),a("td",[s._v("不完全多用户，类似于字符界面，但不包含 NFS(Linux 和 Window 进行文件共享)服务")])]),s._v(" "),a("tr",[a("td",[s._v("3")]),s._v(" "),a("td",[s._v("完整的命令行模式，就是标准的字符界面")])]),s._v(" "),a("tr",[a("td",[s._v("4")]),s._v(" "),a("td",[s._v("系统保留未使用")])]),s._v(" "),a("tr",[a("td",[s._v("5")]),s._v(" "),a("td",[s._v("图形界面")])]),s._v(" "),a("tr",[a("td",[s._v("6")]),s._v(" "),a("td",[s._v("重启")])])])]),s._v(" "),a("h4",{attrs:{id:"_1-1-2-查看上一个级别和当前级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-查看上一个级别和当前级别"}},[s._v("#")]),s._v(" 1.1.2 查看上一个级别和当前级别")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-11-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# runlevel")]),s._v("\nN "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"_1-1-3-切换运行级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-切换运行级别"}},[s._v("#")]),s._v(" 1.1.3 切换运行级别")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("init "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_1-1-4-设置默认运行级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4-设置默认运行级别"}},[s._v("#")]),s._v(" 1.1.4 设置默认运行级别")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/inittab\nid:3:initdefault:\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_1-2-服务的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-服务的分类"}},[s._v("#")]),s._v(" 1.2 服务的分类")]),s._v(" "),a("ul",[a("li",[s._v("系统开启的服务越少，服务器就会更加稳定和安全")]),s._v(" "),a("li",[s._v("服务安装方式不同，启动的方式也不同")])]),s._v(" "),a("h4",{attrs:{id:"_1-2-1-服务管理的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-服务管理的方式"}},[s._v("#")]),s._v(" 1.2.1 服务管理的方式")]),s._v(" "),a("ul",[a("li",[s._v("RPM 包安装的服务,由软件包作者指定安装位置,独立的服务，绝大多数服务都是独立运行在内存中的，可以直接响应客户端的请求")]),s._v(" "),a("li",[s._v("源码包安装的服务，由我们用户决定安装位置")])]),s._v(" "),a("h4",{attrs:{id:"_1-2-2-查看-rpm-包安装的服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-查看-rpm-包安装的服务"}},[s._v("#")]),s._v(" 1.2.2 查看 RPM 包安装的服务")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-11-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig --list")]),s._v("\n\n注：该输出结果只显示 SysV 服务，并不包含\n原生 systemd 服务。SysV 配置数据\n可能被原生 systemd 配置覆盖。 \n\n      要列出 systemd 服务，请执行 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'systemctl list-unit-files'")]),s._v("。\n      查看在具体 target 启用的服务请执行\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'systemctl list-dependencies [target]'")]),s._v("。\n\nnetconsole      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":关 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":关 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":关 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":关 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关\nnetwork         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":开 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":开 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":开 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":开 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h4",{attrs:{id:"_1-2-3-查看源码包安装的服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-查看源码包安装的服务"}},[s._v("#")]),s._v(" 1.2.3 查看源码包安装的服务")]),s._v(" "),a("ul",[a("li",[s._v("查看自定义的安装位置，默认为/usr/local 下")]),s._v(" "),a("li",[s._v("usr= Unix System Resource 系统资源")])]),s._v(" "),a("h4",{attrs:{id:"_1-2-4-启动和自启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-4-启动和自启动"}},[s._v("#")]),s._v(" 1.2.4 启动和自启动")]),s._v(" "),a("ul",[a("li",[s._v("启动服务就是指让此服务在当前系统中运行，并向客户端提供服务")]),s._v(" "),a("li",[s._v("服务自启动就是指通过设置，让此服务在开机或者重启后随着系统启动而自动启动")])]),s._v(" "),a("h3",{attrs:{id:"_1-3-服务与端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-服务与端口"}},[s._v("#")]),s._v(" 1.3 服务与端口")]),s._v(" "),a("p",[s._v("查看系统中的运行中的进程")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-11-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -aux")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("51824")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3720")]),s._v(" ?        Ss    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(":28 /usr/lib/systemd/systemd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--switched")]),s._v("\nroot         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ?        S     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":03 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kthreadd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("查看常见服务端口")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/services\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_1-4-查询系统中监听的端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-查询系统中监听的端口"}},[s._v("#")]),s._v(" 1.4 查询系统中监听的端口")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("netstat -tulnp")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("参数")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("-t")]),s._v(" "),a("td",[s._v("列出 tcp 数据")])]),s._v(" "),a("tr",[a("td",[s._v("-u")]),s._v(" "),a("td",[s._v("列出 udp 数据")])]),s._v(" "),a("tr",[a("td",[s._v("-l")]),s._v(" "),a("td",[s._v("列出正在监听的网络服务")])]),s._v(" "),a("tr",[a("td",[s._v("-n")]),s._v(" "),a("td",[s._v("用端口号来显示服务，而非服务名")])]),s._v(" "),a("tr",[a("td",[s._v("-p")]),s._v(" "),a("td",[s._v("列出该服务的进程 ID")])])])])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-11-centos prod"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -tlnp")]),s._v("\nActive Internet connections "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("only servers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \ntcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1174")]),s._v("/sshd           \ntcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:25            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1372")]),s._v("/master         \ntcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:7002          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6457")]),s._v("/node           \ntcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:37475         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6464")]),s._v("/node           \ntcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:27017           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1044")]),s._v("/mongod         \ntcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:33325         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30960")]),s._v("/node          \ntcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12595")]),s._v("/nginx: master \ntcp6       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::22                   :::*                    LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1174")]),s._v("/sshd           \ntcp6       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::7001                 :::*                    LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21039")]),s._v("/node /usr/src \ntcp6       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ::1:25                  :::*                    LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1372")]),s._v("/master         \ntcp6       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::3306                 :::*                    LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4713")]),s._v("/mysqld      \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"_2-prm-包服务管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-prm-包服务管理"}},[s._v("#")]),s._v(" 2. PRM 包服务管理")]),s._v(" "),a("ul",[a("li",[s._v("RMP 是 LINUX 下的一种软件的可执行程序，你只要安装它就可以了。这种软件安装包通常是一个 RPM 包（Redhat Linux Packet Manager，就是 Redhat 的包管理器），后缀是.rpm")]),s._v(" "),a("li",[s._v("RPM 是 Red Hat 公司随 Redhat Linux 推出了一个软件包管理器，通过它能够更加轻松容易地实现软件的安装")])]),s._v(" "),a("h3",{attrs:{id:"_2-1-rpm-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-rpm-命令"}},[s._v("#")]),s._v(" 2.1 rpm 命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("用途")]),s._v(" "),a("th",[s._v("命令")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("安装软件")]),s._v(" "),a("td",[s._v("执行 rpm -ivh rpm 包名 其中 i 表示安装 install，v 表示显示安装过程 verbose，h 表示显示进度")])]),s._v(" "),a("tr",[a("td",[s._v("升级软件")]),s._v(" "),a("td",[s._v("执行 rpm -Uvh rpm 包名 U 表示升级 update")])]),s._v(" "),a("tr",[a("td",[s._v("反安装")]),s._v(" "),a("td",[s._v("执行 rpm -e rpm 包名")])]),s._v(" "),a("tr",[a("td",[s._v("查询软件包的详细信息")]),s._v(" "),a("td",[s._v("执行 rpm -qpi rpm 包名")])]),s._v(" "),a("tr",[a("td",[s._v("查询某个文件是属于那个 rpm 包的")]),s._v(" "),a("td",[s._v("执行 rpm -qf rpm 包名")])]),s._v(" "),a("tr",[a("td",[s._v("查该软件包会向系统里面写入哪些文件")]),s._v(" "),a("td",[s._v("执行 rpm -qpl rpm 包名")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-2-repo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-repo"}},[s._v("#")]),s._v(" 2.2 repo")]),s._v(" "),a("ul",[a("li",[s._v("repo 文件是 yum 源（软件仓库）的配置文件，通常一个 repo 文件定义了一个或者多个软件仓库的细节内容，例如我们将从哪里下载需要安装或者升级的软件包，repo 文件中的设置内容将被 yum 读取和应用")]),s._v(" "),a("li",[s._v("服务器端：在服务器上面存放了所有的 RPM 软件包，然后以相关的功能去分析每个 RPM 文件的依赖性关系，将这些数据记录成文件存放在服务器的某特定目录内。")]),s._v(" "),a("li",[s._v("客户端：如果需要安装某个软件时，先下载服务器上面记录的依赖性关系文件(可通过 WWW 或 FTP 方式)，通过对服务器端下载的纪录数据进行分析，然后取得所有相关的软件，一次全部下载下来进行安装。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/yum.conf\n/etc/yum.repos.d\n/etc/yum.repos.d/nginx.repo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2-3-rpm-包的默认安装位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-rpm-包的默认安装位置"}},[s._v("#")]),s._v(" 2.3 RPM 包的默认安装位置")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("文件")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("/etc")]),s._v(" "),a("td",[s._v("配置文件位置")])]),s._v(" "),a("tr",[a("td",[s._v("/etc/init.d")]),s._v(" "),a("td",[s._v("启动脚本位置")])]),s._v(" "),a("tr",[a("td",[s._v("/etc/sysconfig")]),s._v(" "),a("td",[s._v("初始化环境配置文件位置")])]),s._v(" "),a("tr",[a("td",[s._v("/var/lib")]),s._v(" "),a("td",[s._v("服务产生的数据放在这里")])]),s._v(" "),a("tr",[a("td",[s._v("/var/log")]),s._v(" "),a("td",[s._v("日志")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-4-启动命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-启动命令"}},[s._v("#")]),s._v(" 2.4 启动命令")]),s._v(" "),a("ul",[a("li",[s._v("systemd 是 Linux 系统最新的初始化系统(init),作用是提高系统的启动速度，尽可能启动较少的进程，尽可能更多进程并发启动")]),s._v(" "),a("li",[s._v("systemd 对应的进程管理命令是 systemctl")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ivh")]),s._v(" http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm\nyum info nginx\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" nginx\nsystemctl start nginx.service\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ltun")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://localhost\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"_2-源码包服务管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-源码包服务管理"}},[s._v("#")]),s._v(" 2. 源码包服务管理")]),s._v(" "),a("ul",[a("li",[s._v("使用绝对路径，调用启动脚本来启动。")]),s._v(" "),a("li",[s._v("不同的源码包的启动脚本不一样")]),s._v(" "),a("li",[s._v("要通过阅读源码包安装说明的方式来查看启动的方法")])]),s._v(" "),a("h3",{attrs:{id:"_2-1-安装-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装-nginx"}},[s._v("#")]),s._v(" 2.1 安装 nginx")]),s._v(" "),a("h4",{attrs:{id:"_2-1-1-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-安装依赖"}},[s._v("#")]),s._v(" 2.1.1 安装依赖")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc gcc-c++ perl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-1-2-下载源文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-下载源文件"}},[s._v("#")]),s._v(" 2.1.2 下载源文件")]),s._v(" "),a("h5",{attrs:{id:"_2-1-2-1-pcre"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-1-pcre"}},[s._v("#")]),s._v(" 2.1.2.1 PCRE")]),s._v(" "),a("ul",[a("li",[s._v("官网")]),s._v(" "),a("li",[s._v("FTP 下载")]),s._v(" "),a("li",[s._v("HTTP 下载")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://zhoubichuan.com/pcre-8.44.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"_2-1-2-2-zlib"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-2-zlib"}},[s._v("#")]),s._v(" 2.1.2.2 zlib")]),s._v(" "),a("ul",[a("li",[s._v("官网")]),s._v(" "),a("li",[s._v("HTTP 下载")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://zhoubichuan.com/zlib-1.2.11.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"_2-1-2-3-openssl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-3-openssl"}},[s._v("#")]),s._v(" 2.1.2.3 openssl")]),s._v(" "),a("ul",[a("li",[s._v("官网")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://zhoubichuan.com/openssl-1.0.2n.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"_2-1-2-4-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-4-nginx"}},[s._v("#")]),s._v(" 2.1.2.4 nginx")]),s._v(" "),a("ul",[a("li",[s._v("官网")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://zhoubichuan.com/nginx-1.10.1.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-1-3-解压文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-解压文件"}},[s._v("#")]),s._v(" 2.1.3 解压文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /root/nginxinstall\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/nginxinstall\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" nginx-1.10.1.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" openssl-1.0.2h.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" pcre-8.44.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" zlib-1.2.11.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h4",{attrs:{id:"_2-1-3-配置和安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-配置和安装"}},[s._v("#")]),s._v(" 2.1.3 配置和安装")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.10.1\n./configure "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--pid-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/nginx.pid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--error-log-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/error.log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--http-log-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/access.log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--with-http_ssl_module "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--with-mail --with-mail_ssl_module "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--with-stream --with-threads "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("comex "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("comexgroup "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--with-pcre"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/nginxinstall/pcre-8.44 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--with-zlib"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/nginxinstall/zlib-1.2.11 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--with-openssl"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/nginxinstall/openssl-1.0.2n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n/usr/local/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v("\nnginx: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("emerg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" getpwnam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"comex"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failed\n\nuseadd nginx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加 nginx 用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/local/nginx/conf/nginx.conf\nuser nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h4",{attrs:{id:"_2-1-4-管理命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-4-管理命令"}},[s._v("#")]),s._v(" 2.1.4 管理命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("功能")]),s._v(" "),a("th",[s._v("命令")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("启动")]),s._v(" "),a("td",[s._v("/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf")])]),s._v(" "),a("tr",[a("td",[s._v("从容停止")]),s._v(" "),a("td",[s._v("ps -ef grep nginx;kill -QUIT 2072")])]),s._v(" "),a("tr",[a("td",[s._v("快速停止")]),s._v(" "),a("td",[s._v("ps -ef grep nginx;kill -TERM 2132; kill -INT 2132")])]),s._v(" "),a("tr",[a("td",[s._v("强制停止")]),s._v(" "),a("td",[s._v("pkill -9 nginx")])]),s._v(" "),a("tr",[a("td",[s._v("验证 nginx 配置文件是否正确")]),s._v(" "),a("td",[s._v("nginx -t")])]),s._v(" "),a("tr",[a("td",[s._v("重启 Nginx 服务")]),s._v(" "),a("td",[s._v("nginx -s reload")])]),s._v(" "),a("tr",[a("td",[s._v("查找当前 nginx 进程号")]),s._v(" "),a("td",[s._v("kill -HUP 进程号")])])])]),s._v(" "),a("h4",{attrs:{id:"_2-1-5-以服务启动-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-5-以服务启动-service"}},[s._v("#")]),s._v(" 2.1.5 以服务启动 service")]),s._v(" "),a("ul",[a("li",[s._v("Nginx 启动、关闭、重新加载脚本")]),s._v(" "),a("li",[s._v("创建文件 etc/init.d/nginx")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("/etc/init.d/nginx start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#! /bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DAEMON")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAME")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONFIGFILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/conf/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAME")]),s._v(".conf\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDFILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/logs/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAME")]),s._v(".pid\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SCRIPTNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/init.d/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAME")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DAEMON")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("do_start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DAEMON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CONFIGFILE")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx already running"')]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ef")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" master "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("do_stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $PIDFILE"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx not running"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("do_reload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-HUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $PIDFILE"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx can\'t reload"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\nstart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAME")]),s._v('"')]),s._v("\ndo_start\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nstop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Stopping '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAME")]),s._v('"')]),s._v("\ndo_stop\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nreload"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("graceful"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Reloading configuration"')]),s._v("\ndo_reload\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nrestart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Restarting '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NAME")]),s._v('"')]),s._v("\ndo_stop\ndo_start\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SCRIPTNAME")]),s._v(' {start|stop|reload|restart}"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br")])]),a("h4",{attrs:{id:"_2-1-7-chkconfig"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-7-chkconfig"}},[s._v("#")]),s._v(" 2.1.7 chkconfig")]),s._v(" "),a("ul",[a("li",[s._v("指定 nginx 脚本可以被 chkconfig 命令管理")])]),s._v(" "),a("h5",{attrs:{id:"_2-1-7-1-开机启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-7-1-开机启动"}},[s._v("#")]),s._v(" 2.1.7.1 开机启动")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--add")]),s._v(" nginx\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--level")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2345")]),s._v(" nginx on\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" nginx off\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);